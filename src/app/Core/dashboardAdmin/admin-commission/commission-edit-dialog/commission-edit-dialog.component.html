<p-toast position="center"></p-toast>
<div style="direction: rtl; text-align: right">
  <form [formGroup]="form" (ngSubmit)="submitForm()" class="w-100 mt-3">

    <div class="p-fluid p-formgrid p-grid">
      <div class="p-field p-col">
        <label class="d-block">دسته بندی اول</label>
        <p-dropdown appendTo="body" emptyFilterMessage="نتیجه ای یافت نشد"
                    [options]="categories"
                    formControlName="catID"
                    (onChange)="getSubCategory($event)"
                    optionLabel="title" [filter]="true" placeholder="-- انتخاب کنید --">
          <ng-template pTemplate="selectedItem">
            <div class="state-item state-item-value"
                 *ngIf="form.controls['catID'].value">
              <div>{{form.controls['catID'].value.title}}</div>
            </div>
          </ng-template>
          <ng-template let-category pTemplate="item">
            <div class="state-item text-right">
              <div class="text-right">{{category.title}}</div>
            </div>
          </ng-template>
        </p-dropdown>
      </div>
      <div class="p-field p-col">
        <label class="d-block">دسته بندی دوم</label>
        <p-dropdown appendTo="body" emptyFilterMessage="نتیجه ای یافت نشد"
                    [options]="subCategories"
                    (onChange)="getSubSubCategory($event)"
                    formControlName="subID"
                    optionLabel="title" [filter]="true" placeholder="-- انتخاب کنید --">
          <ng-template pTemplate="selectedItem">
            <div class="state-item state-item-value"
                 *ngIf="form.controls['subID'].value">
              <div>{{form.controls['subID'].value.title}}</div>
            </div>
          </ng-template>
          <ng-template let-category pTemplate="item">
            <div class="state-item text-right">
              <div class="text-right">{{category.title}}</div>
            </div>
          </ng-template>
        </p-dropdown>
      </div>
      <div class="p-field p-col">
        <label class="d-block">دسته بندی سوم</label>
        <p-dropdown appendTo="body" emptyFilterMessage="نتیجه ای یافت نشد"
                    [options]="subSubCategories"
                    formControlName="subSubID"
                    optionLabel="title" [filter]="true" placeholder="-- انتخاب کنید --">
          <ng-template pTemplate="selectedItem">
            <div class="state-item state-item-value"
                 *ngIf="form.controls['subSubID'].value">
              <div>{{form.controls['subSubID'].value.title}}</div>
            </div>
          </ng-template>
          <ng-template let-category pTemplate="item">
            <div class="state-item text-right">
              <div class="text-right">{{category.title}}</div>
            </div>
          </ng-template>
        </p-dropdown>
      </div>
    </div>
    <div class="p-fluid p-formgrid p-grid">
      <div class="p-field p-col">
        <label for="title">درصد</label>
        <input id="title" type="text" pInputText
               formControlName="percent">
        <ul class="mt-1 text-right list-inline"
            *ngFor="let error of errorMessages.percent">
          <li class="font-small text-danger font-title-bold list-inline-item"
              *ngIf="form.get('percent').hasError(error.type)
                            && (form.get('percent').dirty
                            || form.get('percent').touched)">
            {{ error.message }}
          </li>
        </ul>
      </div>
    </div>
    <div class="p-fluid p-formgrid p-grid">
      <div class="p-field p-col">
        <div class="float-left">
          <button pButton label="ثبت" class="ui-button-success"
                  icon="pi pi-check" iconPos="left" [disabled]="form.invalid"></button>
        </div>
      </div>
    </div>

  </form>
</div>
